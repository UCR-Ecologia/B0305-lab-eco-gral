---
subtitle: "B0305 -- Lab Eco Gral<br><a href='https://ucr-ecologia.github.io/B0305-lab-eco-gral/' target='_blank'>https://ucr-ecologia.github.io/B0305-lab-eco-gral/</a>"
title: "<font style='font-size:1em;'>Escribiendo Reportes CientÃ­ficos con Quarto</font>"
author: Prof. G. Avalos y T. Nakov
institute: 'Escuela de Biologia, Universidad de Costa Rica'
date: 01 August 2025
date-meta: 01 August 2025
date-format: "DD MMM YYYY"
toc: true
toc-depth: 1
toc-title: "Que vamos a ver:"
center-title-slide: false
from: markdown+emoji
format:
  revealjs: 
    fig-responsive: true
    theme: simple
    slide-number: true
    mouse-wheel: false
    preview-links: auto
    incremental: false
    logo: /figures/icons/course_favicon.png
    css: 
      - /css/styles_slides.css
      - custom.css
    footer: 'B0305 -- Lab Eco Gral'
execute:
  echo: true
  cache: false
---

# Â¿Por quÃ© Quarto para reportes cientÃ­ficos?

## Problemas con Word tradicional ðŸ˜¤

::: {.columns}
::: {.column}
::: {.fragment}
### Citas y bibliografÃ­a
- Copiar y pegar referencias manualmente
- Formato inconsistente 
- Error al cambiar estilos de citaciÃ³n
- BibliografÃ­a desorganizada
:::

::: {.fragment}
### Figuras y tablas
- "La figura se moviÃ³ sola" ðŸ¤¯
- Referencias cruzadas rotas
- Leyendas inconsistentes
- Problemas de resoluciÃ³n
:::
:::
::: {.column}
::: {.fragment}
### Reproducibilidad
- Â¿CÃ³mo se generÃ³ esa grÃ¡fica?
- Â¿CuÃ¡l anÃ¡lisis se usÃ³?
- Imposible reproducir resultados
:::

:::
:::



---

## Ventajas de Quarto ðŸš€
::: {.columns}
::: {.column}
::: {.fragment}
### Todo en un lugar
- Texto + cÃ³digo + resultados
- AutomÃ¡ticamente actualizado
- Formato profesional
:::

::: {.fragment}
### Citas automÃ¡ticas
- Base de datos bibliogrÃ¡fica (BibTeX)
- InserciÃ³n automÃ¡tica: `[@autor2023]`
- MÃºltiples formatos: APA, Chicago, Nature...
:::
:::
::: {.column}

::: {.fragment}
### Figuras inteligentes
- Generadas por cÃ³digo R/Python
- Referencias automÃ¡ticas: `@fig-crecimiento`
- NumeraciÃ³n y leyendas consistentes
:::

::: {.fragment}
### MÃºltiples formatos
- PDF para entregar
- HTML para web/presentaciÃ³n
- Word si es necesario
:::
:::
::: 

# InstalaciÃ³n y configuraciÃ³n

## Requisitos del sistema ðŸ”§

::: {.fragment}
### Quarto CLI (obligatorio)
**Quarto** es una aplicaciÃ³n independiente que debe instalarse en su sistema:

- **Windows:** Descargar de [quarto.org](https://quarto.org/docs/get-started/)
- **Mac:** `brew install quarto` o descargar instalador
- **Linux:** `sudo apt install quarto` o descargar .deb/.rpm

**Verificar instalaciÃ³n:**
```bash
quarto --version  # Debe mostrar v1.4+ 
```
:::

::: {.fragment}
### RStudio (recomendado)
- **RStudio Desktop** (v2022.07+) con soporte nativo para Quarto
- **Alternativa:** VS Code con extensiÃ³n de Quarto
:::

---

## Configurar entorno R ðŸ“¦

::: {.columns}

::: {.column width="50%"}
::: {.fragment}
### OpciÃ³n A: renv (recomendado)
Si tienen `renv.lock` del curso:

```r
# En RStudio/R Console
install.packages("renv")
renv::restore()
```

Esto instalarÃ¡ automÃ¡ticamente:  
- `quarto` (paquete R para interfaz)  
- `knitr`, `ggplot2`, `dplyr`  
- Todas las dependencias necesarias  
:::
:::

::: {.column width="50%"}
::: {.fragment}
### OpciÃ³n B: InstalaciÃ³n manual
```r
install.packages(c(
  "quarto",      # Interfaz R-Quarto
  "knitr",       # Para renderizar
  "rmarkdown",   # Compatibilidad
  "ggplot2",     # GrÃ¡ficos
  "dplyr",       # ManipulaciÃ³n datos
  "palmerpenguins" # Datos ejemplo
))
```

**Verificar:**
```r
library(quarto)
quarto_version()  # Debe detectar Quarto CLI
```
:::
:::

:::

---

# IntroducciÃ³n a Markdown

## Â¿QuÃ© es Markdown? ðŸ“

::: {.fragment}
**Markdown** es un lenguaje de marcado ligero para dar formato a texto

- **FÃ¡cil de leer** en texto plano
- **FÃ¡cil de escribir** - solo sÃ­mbolos simples
- **Se convierte** a HTML, PDF, Word...
:::

::: {.fragment}
### FilosofÃ­a
> "Un documento Markdown debe ser legible tal como estÃ¡, sin verse como si hubiera sido marcado con etiquetas o instrucciones de formato"
> 
> â€” John Gruber (creador de Markdown)
:::

---

## Formato bÃ¡sico de texto

::: {.columns}

::: {.column width="50%"}
**CÃ³digo Markdown:**
```markdown
# TÃ­tulo principal
## SubtÃ­tulo
### Sub-subtÃ­tulo

**Texto en negrita**
*Texto en cursiva*
~~Texto tachado~~

PÃ¡rrafo normal con texto.

- Lista con viÃ±etas
- Segundo elemento
  - Sub-elemento

1. Lista numerada
2. Segundo elemento
3. Tercer elemento
```
:::

::: {.column width="50%"}
**Resultado:**

<div style="border: 1px solid #ccc; padding: 1em; background-color: #f9f9f9;">

<h1 style="margin-top: 0;">TÃ­tulo principal</h1>
<h2>SubtÃ­tulo</h2>  
<h3>Sub-subtÃ­tulo</h3>

<strong>Texto en negrita</strong><br>
<em>Texto en cursiva</em><br>
<s>Texto tachado</s>

<p>PÃ¡rrafo normal con texto.</p>

<ul>
<li>Lista con viÃ±etas</li>
<li>Segundo elemento
  <ul><li>Sub-elemento</li></ul>
</li>
</ul>

<ol>
<li>Lista numerada</li>
<li>Segundo elemento</li>  
<li>Tercer elemento</li>
</ol>

</div>
:::

:::

---

## Enlaces y citas cientÃ­ficas

::: {.columns}

::: {.column width="50%"}
**Enlaces:**
```markdown
[Texto de enlace](https://ejemplo.com)

[Email](mailto:profesor@ucr.ac.cr)
```

**Citas bibliogrÃ¡ficas:**
```markdown
SegÃºn @begon2006ecology, las poblaciones...

El crecimiento logÃ­stico [@verhulst1838notice; @gotelli2008primer] es fundamental.

Como mencionan varios autores [-@pearl1925biology; -@begon2006ecology]
```
:::

::: {.column width="50%"}
**Resultado:**

[Texto de enlace](https://ejemplo.com)

[Email](mailto:profesor@ucr.ac.cr)

SegÃºn Begon et al. (2006), las poblaciones...

El crecimiento logÃ­stico (Verhulst, 1838; Gotelli, 2008) es fundamental.

Como mencionan varios autores (Pearl & Reed, 1925; Begon et al., 2006)
:::

:::

---

## Ecuaciones matemÃ¡ticas

::: {.columns}

::: {.column width="50%"}
**Inline math:**
```markdown
La poblaciÃ³n crece segÃºn $N(t) = N_0 e^{rt}$
```

**Display math:**
```markdown
$$N(t) = \frac{K}{1 + \left(\frac{K-N_0}{N_0}\right)e^{-rt}}$$
```

**Ecuaciones numeradas:**
```markdown
$$N(t) = N_0 e^{rt}$$ {#eq-exponencial}

Ver ecuaciÃ³n @eq-exponencial...
```
:::

::: {.column width="50%"}
**Resultado:**

La poblaciÃ³n crece segÃºn $N(t) = N_0 e^{rt}$

$$N(t) = \frac{K}{1 + \left(\frac{K-N_0}{N_0}\right)e^{-rt}}$$

$$N(t) = N_0 e^{rt}$$ {#eq-exponencial}

Ver ecuaciÃ³n @eq-exponencial ...
:::

:::

---

## CÃ³digo y resultados

::: {.columns}

::: {.column width="60%"}
**CÃ³digo R en Quarto:**
```markdown
#| label: fig-crecimiento
#| fig-cap: "Crecimiento de S. cerevisiae"
#| echo: true

library(ggplot2)
data <- data.frame(
  tiempo = 0:24, 
  densidad = exp(0.2 * (0:24))
)
ggplot(data, aes(tiempo, densidad)) + 
  geom_line() + 
  labs(x = "Tiempo (h)", 
       y = "Densidad (cells/mL)")

Como se observa en @fig-crecimiento, el crecimiento es exponencial.
```

:::

::: {.column width="40%"}
**Resultado ejecutado:**

```{r}
#| label: fig-crecimiento
#| fig-cap: "Crecimiento de *S. cerevisiae* en medio YPD"
#| echo: false
#| fig-width: 4
#| fig-height: 3

library(ggplot2)
data <- data.frame(tiempo = 0:24, densidad = exp(0.2 * (0:24)))
ggplot(data, aes(tiempo, densidad)) + 
  geom_line(color = "steelblue", size = 1) + 
  labs(x = "Tiempo (h)", y = "Densidad (cells/mL)") +
  theme_bw()
```

Como se observa en @fig-crecimiento, el crecimiento es exponencial.
:::

:::


# La plantilla B0305

## Estructura de archivos ðŸ“

Su plantilla incluye varios archivos importantes:

```
B305-report-template-kit/
â”œâ”€â”€ B305-report-template.qmd    # ðŸ“ Plantilla principal
â”œâ”€â”€ reference.docx              # ðŸ“„ Formato Word de referencia  
â”œâ”€â”€ references.bib              # ðŸ“š Base de datos bibliogrÃ¡fica
â”œâ”€â”€ apa.csl                     # ðŸ“‹ Estilo de citaciÃ³n APA
â”œâ”€â”€ styles.css                  # ðŸŽ¨ Estilos HTML
â””â”€â”€ how-to-knit.md             # ðŸ“– Instrucciones
```

::: {.fragment}
**Â¡Todos deben estar en la misma carpeta!** ðŸ“‚
:::

---

## ConfiguraciÃ³n YAML

El encabezado YAML configura todo el documento:

```yaml
---
title: "TÃTULO DEL REPORTE (12â€“15 palabras)"
author:
  - name: "Nombre Apellido-Apellido" 
    affiliation: "Escuela de BiologÃ­a, Universidad de Costa Rica..."
keywords: ["palabra clave 1", "palabra clave 2", ...]
format:
  pdf: 
    pdf-engine: xelatex
    mainfont: "Times New Roman"
    fontsize: 12pt
    linestretch: 2    # Doble espacio
  html:
    css: styles.css
  docx:
    reference-doc: reference.docx
bibliography: references.bib
csl: apa.csl
lang: es
---
```

---

## MÃºltiples formatos de salida

::: {.fragment}
### PDF (recomendado para entrega)
```bash
quarto render B305-report-template.qmd --to pdf
```
- Formato profesional
- Times New Roman, 12pt
- Doble espacio
- MÃ¡rgenes correctos
:::

::: {.fragment}
### HTML (para revisiÃ³n)
```bash
quarto render B305-report-template.qmd --to html
```
- RÃ¡pido de generar
- FÃ¡cil de compartir
- Links clickeables
:::

::: {.fragment}
### Word (si es necesario)
```bash
quarto render B305-report-template.qmd --to docx
```
- Compatible con revisiones
- Formato basado en `reference.docx`
:::

---

## Estructura del reporte

```markdown
# Resumen
**Resumen:** (mÃ¡x. 250 palabras).
**Palabras claves:** palabra1; palabra2; palabra3; palabra4; palabra5

# INTRODUCCIÃ“N
Contexto, antecedentes, hipÃ³tesis...

# MATERIALES Y MÃ‰TODOS
DescripciÃ³n detallada de mÃ©todos...

# RESULTADOS  
PresentaciÃ³n objetiva de resultados...

# DISCUSIÃ“N
InterpretaciÃ³n y comparaciÃ³n con literatura...

# LITERATURA CITADA
(Se genera automÃ¡ticamente)
```

# Trabajando con citas

## Base de datos bibliogrÃ¡fica (BibTeX)

El archivo `references.bib` contiene todas sus referencias:

```bibtex
@book{begon2006ecology,
  title={Ecology: from individuals to ecosystems},
  author={Begon, Michael and Townsend, Colin R and Harper, John L},
  year={2006},
  publisher={Blackwell publishing}
}

@article{verhulst1838notice,
  title={Notice sur la loi que la population suit dans son accroissement},
  author={Verhulst, Pierre Fran{\c{c}}ois},
  journal={Correspondance math{\'e}matique et physique},
  volume={10},
  pages={113--126},
  year={1838}
}
```

---

## Agregando nuevas referencias

::: {.fragment}
### Desde Google Scholar
1. Buscar el artÃ­culo
2. Click en "Citar" 
3. Click en "BibTeX"
4. Copiar y pegar en `references.bib`
:::

::: {.fragment}
### Desde DOI
- Usar [doi2bib.org](https://www.doi2bib.org/)
- Introducir DOI: `10.1038/nature12373`
- Copiar resultado a `references.bib`
:::

---

## Citando en el texto

::: {.columns}

::: {.column width="50%"}
**CÃ³digo Markdown:**
```markdown
<!-- Cita parentÃ©tica -->
El crecimiento poblacional [@verhulst1838notice] 
es fundamental.

<!-- Cita narrativa -->
SegÃºn @begon2006ecology, las poblaciones...

<!-- MÃºltiples citas -->
Varios autores [@verhulst1838notice; @gotelli2008primer] 
han estudiado...

<!-- Solo aÃ±o -->
@begon2006ecology [-@begon2006ecology] mostraron...

<!-- PÃ¡ginas especÃ­ficas -->
Como indica @verhulst1838notice [p. 15], la ecuaciÃ³n...
```
:::

::: {.column width="50%"}
**Resultado:**

El crecimiento poblacional (Verhulst, 1838) es fundamental.

SegÃºn Begon et al. (2006), las poblaciones...

Varios autores (Verhulst, 1838; Gotelli, 2008) han estudiado...

Begon et al. (2006) mostraron...

Como indica Verhulst (1838, p. 15), la ecuaciÃ³n...
:::

:::

# Figuras y tablas

## Figuras desde R

::: {.columns}

::: {.column width="50%"}
**CÃ³digo R para figura:**
```markdown
#| label: fig-logistico
#| fig-cap: "Crecimiento logÃ­stico de S. cerevisiae"
#| fig-width: 6
#| fig-height: 4
#| echo: false

library(ggplot2)
t <- seq(0, 24, 0.1)
N <- 1000 / (1 + 99 * exp(-0.3 * t))
data <- data.frame(tiempo = t, densidad = N)

ggplot(data, aes(tiempo, densidad)) +
  geom_line(color = "steelblue", size = 1.2) +
  labs(x = "Tiempo (horas)", 
       y = "Densidad (cÃ©lulas/mL)") +
  theme_bw()

Como se observa en @fig-logistico...

```

**Opciones importantes:**  
- `label:` para referencias cruzadas  
- `fig-cap:` para la leyenda  
- `echo: false` para ocultar cÃ³digo  
- `fig-width` y `fig-height` para dimensiones  


:::

::: {.column width="50%"}
**Resultado ejecutado:**

```{r}
#| label: fig-logistico
#| fig-cap: "Crecimiento logÃ­stico de *Saccharomyces cerevisiae*"
#| fig-width: 5
#| fig-height: 3.5
#| echo: false

library(ggplot2)
t <- seq(0, 24, 0.1)
N <- 1000 / (1 + 99 * exp(-0.3 * t))
data <- data.frame(tiempo = t, densidad = N)

ggplot(data, aes(tiempo, densidad)) +
  geom_line(color = "steelblue", size = 1.2) +
  labs(x = "Tiempo (horas)", 
       y = "Densidad (cÃ©lulas/mL)") +
  theme_bw()
```

Como se observa en @fig-logistico, el crecimiento presenta una curva tÃ­pica logÃ­stica.
:::

:::


---

## Tablas con cÃ³digo R

::: {.columns}

::: {.column width="50%"}
**CÃ³digo R para tabla:**
```markdown
#| label: tbl-parametros
#| tbl-cap: "ParÃ¡metros del modelo logÃ­stico"

library(knitr)
parametros <- data.frame(
  ParÃ¡metro = c("K", "r", "Nâ‚€"),
  Valor = c(987.3, 0.281, 10.2),
  `Error estÃ¡ndar` = c(45.2, 0.025, 1.8),
  Unidades = c("cÃ©lulas/mL", "hâ»Â¹", "cÃ©lulas/mL")
)
kable(parametros, digits = 3)

Los parÃ¡metros estimados (@tbl-parametros)...

```

:::

::: {.column width="50%"}
**Resultado ejecutado:**

```{r}
#| label: tbl-parametros
#| tbl-cap: "ParÃ¡metros del modelo logÃ­stico estimados"
#| echo: false

library(knitr)
parametros <- data.frame(
  ParÃ¡metro = c("K", "r", "Nâ‚€"),
  Valor = c(987.3, 0.281, 10.2),
  `Error estÃ¡ndar` = c(45.2, 0.025, 1.8),
  Unidades = c("cÃ©lulas/mL", "hâ»Â¹", "cÃ©lulas/mL")
)
kable(parametros, digits = 3)
```

Los parÃ¡metros estimados (@tbl-parametros) muestran que la capacidad de carga es aproximadamente 987 cÃ©lulas/mL.
:::

:::

---

## Figuras externas

:::{.fragment}
````{.markdown}
![Microscopio utilizado en el experimento](img/microscopio.jpeg){#fig-microscopio width=20%}

Las observaciones se realizaron con el microscopio mostrado en @fig-microscopio...
````
:::

::: {.fragment}
![Microscopio utilizado en el experimento](img/microscopio.jpeg){#fig-microscopio width=20%}

Las observaciones se realizaron con el microscopio mostrado en @fig-microscopio...
:::

::: {.fragment}
**Formatos recomendados:**  
- **PNG** para diagramas y screenshots  
- **JPG** para fotografÃ­as  
- **PDF** para figuras vectoriales  
- **SVG** para grÃ¡ficos web  
:::

# Flujo de trabajo recomendado

## Pasos para crear un reporte

### 1. Preparar el workspace

::: {.columns}
::: {.column width="50%"}
::: {.fragment}
1. **Crear nueva carpeta:**  
   - Nombrar: `mi-reporte-ecologia`   

2. **Descargar plantilla:**   
   - Ir al repositorio del curso  
   - Descargar `B305-report-template-kit.zip`  
   - Extraer en la carpeta creada  

3. **En RStudio:**  
   - File â†’ New Project â†’ Existing Directory  
   - Seleccionar `mi-reporte-ecologia`  
   - Renombrar `B305-report-template.qmd` â†’ `mi-reporte.qmd` 

:::
:::

::: {.column width="50%"}

::: {.fragment}
**Verificar archivos:**  
- âœ… `mi-reporte.qmd`  
- âœ… `references.bib`  
- âœ… `reference.docx`  
- âœ… `apa.csl`  
- âœ… `styles.css`  
:::

::: {.fragment}
### 2. Configurar encabezado  
- Cambiar tÃ­tulo y autor  
- Ajustar palabras clave  
- Verificar archivos auxiliares  
:::

::: {.fragment}
### 3. Escribir contenido  
- Usar estructura cientÃ­fica estÃ¡ndar  
- Incorporar cÃ³digo R inline  
- Citar literatura relevante  
:::
:::
:::


---

## Durante el desarrollo

::: {.fragment}
### Renderizar frecuentemente
```bash
# Vista rÃ¡pida HTML
quarto render mi-reporte.qmd --to html

# VersiÃ³n final PDF  
quarto render mi-reporte.qmd --to pdf
```
:::

<!-- ::: {.fragment}
### Usar control de versiones
```bash
git init
git add .
git commit -m "VersiÃ³n inicial del reporte"

# DespuÃ©s de cambios importantes
git add -A
git commit -m "Agregado anÃ¡lisis estadÃ­stico"
```
::: -->

::: {.fragment}
### Respaldos regulares
- Guardar en la nube (Google Drive, Dropbox)
- Enviar por email a ustedes mismos
- Usar repositorio GitHub
:::

---

## Consejos para reportes exitosos

::: {.fragment}
### OrganizaciÃ³n de archivos
```
mi-proyecto/
â”œâ”€â”€ mi-reporte.qmd           # Documento principal
â”œâ”€â”€ references.bib           # Bibliografia  
â”œâ”€â”€ data/                    # Datos
â”‚   â”œâ”€â”€ crecimiento.csv
â”‚   â””â”€â”€ experimento.xlsx
â”œâ”€â”€ scripts/                 # CÃ³digo R auxiliar
â”‚   â””â”€â”€ analisis.R
â”œâ”€â”€ figures/                 # Figuras externas
â”‚   â””â”€â”€ setup-experimental.jpg
â””â”€â”€ output/                  # Archivos generados
    â”œâ”€â”€ mi-reporte.pdf
    â””â”€â”€ mi-reporte.html
```
:::

::: {.fragment}
### Buenas prÃ¡cticas
- **Comentar el cÃ³digo R** para futuro yo
- **Usar nombres descriptivos** para chunks y figuras  
- **Verificar referencias** antes de entregar
- **Revisar formato final** en PDF
:::

# DemostraciÃ³n prÃ¡ctica

## Crear un reporte simple

Vamos a crear juntos un reporte bÃ¡sico paso a paso:

::: {.fragment}
### 1. ConfiguraciÃ³n inicial
- Copiar plantilla
- Cambiar tÃ­tulo y autor  
- Ajustar palabras clave
:::

::: {.fragment}
### 2. Agregar contenido
- Escribir introducciÃ³n simple
- Incluir una figura R
- Agregar una cita
:::

::: {.fragment}
### 3. Renderizar
- Generar HTML para revisiÃ³n
- Generar PDF final
:::

---

# Â¡Manos a la obra! ðŸš€

**Su prÃ³ximo reporte serÃ¡:**  
- Profesional y reproducible  
- Con citas automÃ¡ticas   
- Figuras y tablas numeradas  
- MÃºltiples formatos de salida  

**Â¿Preguntas?** ðŸ¤”

---

## Para la prÃ³xima semana

::: {.fragment}
### PrÃ¡ctica requerida
1. **Descargar la plantilla** desde el repositorio del curso
2. **Crear un reporte corto** (2-3 pÃ¡ginas) sobre cualquier tema de ecologÃ­a
3. **Incluir:** Al menos 2 citas, 1 figura generada con R, 1 tabla
4. **Renderizar** a PDF y HTML
:::

## Bibliografia

### DocumentaciÃ³n oficial
- [Quarto Documentation](https://quarto.org/docs/)
- [Quarto Reference](https://quarto.org/docs/reference/)

### Markdown y matemÃ¡ticas
- [Markdown Cheat Sheet](https://www.markdownguide.org/cheat-sheet/)
- [LaTeX Math Symbols](http://tug.ctan.org/info/undergradmath/undergradmath.pdf)

### GestiÃ³n bibliogrÃ¡fica
- [Zotero](https://www.zotero.org/) - Gestor gratuito
- [Google Scholar](https://scholar.google.com/) - BÃºsqueda acadÃ©mica
- [doi2bib](https://www.doi2bib.org/) - DOI a BibTeX
