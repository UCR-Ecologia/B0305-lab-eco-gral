---
subtitle: "B0305 -- Lab Eco Gral<br><a href='https://ucr-ecologia.github.io/B0305-lab-eco-gral/' target='_blank'>https://ucr-ecologia.github.io/B0305-lab-eco-gral/</a>"
title: "<font style='font-size:1em;'>Escribiendo Reportes Cient√≠ficos con Quarto</font>"
author: Prof. G. Avalos y T. Nakov
institute: 'Escuela de Biologia, Universidad de Costa Rica'
date: 01 August 2025
date-meta: 01 August 2025
date-format: "DD MMM YYYY"
toc: true
toc-depth: 1
toc-title: "Que vamos a ver:"
center-title-slide: false
from: markdown+emoji
format:
  revealjs: 
    fig-responsive: true
    theme: simple
    slide-number: true
    mouse-wheel: false
    preview-links: auto
    incremental: false
    logo: /figures/icons/course_favicon.png
    css: 
      - /css/styles_slides.css
      - custom.css
    footer: 'B0305 -- Lab Eco Gral'
execute:
  echo: true
  cache: false
---

# ¬øPor qu√© Quarto para reportes cient√≠ficos?

## Problemas con Word tradicional üò§

::: {.columns}
::: {.column}
::: {.fragment}
### Citas y bibliograf√≠a
- Copiar y pegar referencias manualmente
- Formato inconsistente 
- Error al cambiar estilos de citaci√≥n
- Bibliograf√≠a desorganizada
:::

::: {.fragment}
### Figuras y tablas
- "La figura se movi√≥ sola" ü§Ø
- Referencias cruzadas rotas
- Leyendas inconsistentes
- Problemas de resoluci√≥n
:::
:::
::: {.column}
::: {.fragment}
### Reproducibilidad
- ¬øC√≥mo se gener√≥ esa gr√°fica?
- ¬øCu√°l an√°lisis se us√≥?
- Imposible reproducir resultados
:::

:::
:::



---

## Ventajas de Quarto üöÄ
::: {.columns}
::: {.column}
::: {.fragment}
### Todo en un lugar
- Texto + c√≥digo + resultados
- Autom√°ticamente actualizado
- Formato profesional
:::

::: {.fragment}
### Citas autom√°ticas
- Base de datos bibliogr√°fica (BibTeX)
- Inserci√≥n autom√°tica: `[@autor2023]`
- M√∫ltiples formatos: APA, Chicago, Nature...
:::
:::
::: {.column}

::: {.fragment}
### Figuras inteligentes
- Generadas por c√≥digo R/Python
- Referencias autom√°ticas: `@fig-crecimiento`
- Numeraci√≥n y leyendas consistentes
:::

::: {.fragment}
### M√∫ltiples formatos
- PDF para entregar
- HTML para web/presentaci√≥n
- Word si es necesario
:::
:::
::: 

# Instalaci√≥n y configuraci√≥n

## Requisitos del sistema üîß

::: {.fragment}
### Quarto CLI (obligatorio)
**Quarto** es una aplicaci√≥n independiente que debe instalarse en su sistema:

- **Windows:** Descargar de [quarto.org](https://quarto.org/docs/get-started/)
- **Mac:** `brew install quarto` o descargar instalador
- **Linux:** `sudo apt install quarto` o descargar .deb/.rpm

**Verificar instalaci√≥n:**
```bash
quarto --version  # Debe mostrar v1.4+ 
```
:::

::: {.fragment}
### RStudio (recomendado)
- **RStudio Desktop** (v2022.07+) con soporte nativo para Quarto
- **Alternativa:** VS Code con extensi√≥n de Quarto
:::

---

## Configurar entorno R üì¶

::: {.columns}

::: {.column width="50%"}
::: {.fragment}
### Opci√≥n A: renv (recomendado)
Si tienen `renv.lock` del curso:

```r
# En RStudio/R Console
install.packages("renv")
renv::restore()
```

Esto instalar√° autom√°ticamente:  
- `quarto` (paquete R para interfaz)  
- `knitr`, `ggplot2`, `dplyr`  
- Todas las dependencias necesarias  
:::
:::

::: {.column width="50%"}
::: {.fragment}
### Opci√≥n B: Instalaci√≥n manual
```r
install.packages(c(
  "quarto",      # Interfaz R-Quarto
  "knitr",       # Para renderizar
  "rmarkdown",   # Compatibilidad
  "ggplot2",     # Gr√°ficos
  "dplyr",       # Manipulaci√≥n datos
  "palmerpenguins" # Datos ejemplo
))
```

**Verificar:**
```r
library(quarto)
quarto_version()  # Debe detectar Quarto CLI
```
:::
:::

:::

---

# Introducci√≥n a Markdown

## ¬øQu√© es Markdown? üìù

::: {.fragment}
**Markdown** es un lenguaje de marcado ligero para dar formato a texto

- **F√°cil de leer** en texto plano
- **F√°cil de escribir** - solo s√≠mbolos simples
- **Se convierte** a HTML, PDF, Word...
:::

::: {.fragment}
### Filosof√≠a
> "Un documento Markdown debe ser legible tal como est√°, sin verse como si hubiera sido marcado con etiquetas o instrucciones de formato"
> 
> ‚Äî John Gruber (creador de Markdown)
:::

---

## Formato b√°sico de texto

::: {.columns}

::: {.column width="50%"}
**C√≥digo Markdown:**
```markdown
# T√≠tulo principal
## Subt√≠tulo
### Sub-subt√≠tulo

**Texto en negrita**
*Texto en cursiva*
~~Texto tachado~~

P√°rrafo normal con texto.

- Lista con vi√±etas
- Segundo elemento
  - Sub-elemento

1. Lista numerada
2. Segundo elemento
3. Tercer elemento
```
:::

::: {.column width="50%"}
**Resultado:**

<div style="border: 1px solid #ccc; padding: 1em; background-color: #f9f9f9;">

<h1 style="margin-top: 0;">T√≠tulo principal</h1>
<h2>Subt√≠tulo</h2>  
<h3>Sub-subt√≠tulo</h3>

<strong>Texto en negrita</strong><br>
<em>Texto en cursiva</em><br>
<s>Texto tachado</s>

<p>P√°rrafo normal con texto.</p>

<ul>
<li>Lista con vi√±etas</li>
<li>Segundo elemento
  <ul><li>Sub-elemento</li></ul>
</li>
</ul>

<ol>
<li>Lista numerada</li>
<li>Segundo elemento</li>  
<li>Tercer elemento</li>
</ol>

</div>
:::

:::

---

## Enlaces y citas cient√≠ficas

::: {.columns}

::: {.column width="50%"}
**Enlaces:**
```markdown
[Texto de enlace](https://ejemplo.com)

[Email](mailto:profesor@ucr.ac.cr)
```

**Citas bibliogr√°ficas:**
```markdown
Seg√∫n @begon2006ecology, las poblaciones...

El crecimiento log√≠stico [@verhulst1838notice; @gotelli2008primer] es fundamental.

Como mencionan varios autores [-@pearl1925biology; -@begon2006ecology]
```
:::

::: {.column width="50%"}
**Resultado:**

[Texto de enlace](https://ejemplo.com)

[Email](mailto:profesor@ucr.ac.cr)

Seg√∫n Begon et al. (2006), las poblaciones...

El crecimiento log√≠stico (Verhulst, 1838; Gotelli, 2008) es fundamental.

Como mencionan varios autores (Pearl & Reed, 1925; Begon et al., 2006)
:::

:::

---

## Ecuaciones matem√°ticas

::: {.columns}

::: {.column width="50%"}
**Inline math:**
```markdown
La poblaci√≥n crece seg√∫n $N(t) = N_0 e^{rt}$
```

**Display math:**
```markdown
$$N(t) = \frac{K}{1 + \left(\frac{K-N_0}{N_0}\right)e^{-rt}}$$
```

**Ecuaciones numeradas:**
```markdown
$$N(t) = N_0 e^{rt}$$ {#eq-exponencial}

Ver ecuaci√≥n @eq-exponencial...
```
:::

::: {.column width="50%"}
**Resultado:**

La poblaci√≥n crece seg√∫n $N(t) = N_0 e^{rt}$

$$N(t) = \frac{K}{1 + \left(\frac{K-N_0}{N_0}\right)e^{-rt}}$$

$$N(t) = N_0 e^{rt}$$ {#eq-exponencial}

Ver ecuaci√≥n @eq-exponencial ...
:::

:::

---

## C√≥digo y resultados

::: {.columns}

::: {.column width="60%"}
**C√≥digo R en Quarto:**
```markdown
#| label: fig-crecimiento
#| fig-cap: "Crecimiento de S. cerevisiae"
#| echo: true

library(ggplot2)
data <- data.frame(
  tiempo = 0:24, 
  densidad = exp(0.2 * (0:24))
)
ggplot(data, aes(tiempo, densidad)) + 
  geom_line() + 
  labs(x = "Tiempo (h)", 
       y = "Densidad (cells/mL)")

Como se observa en @fig-crecimiento, el crecimiento es exponencial.
```

:::

::: {.column width="40%"}
**Resultado ejecutado:**

```{r}
#| label: fig-crecimiento
#| fig-cap: "Crecimiento de *S. cerevisiae* en medio YPD"
#| echo: false
#| fig-width: 4
#| fig-height: 3

library(ggplot2)
data <- data.frame(tiempo = 0:24, densidad = exp(0.2 * (0:24)))
ggplot(data, aes(tiempo, densidad)) + 
  geom_line(color = "steelblue", size = 1) + 
  labs(x = "Tiempo (h)", y = "Densidad (cells/mL)") +
  theme_bw()
```

Como se observa en @fig-crecimiento, el crecimiento es exponencial.
:::

:::


# La plantilla B0305

## Estructura de archivos üìÅ

Su plantilla incluye varios archivos importantes:

```
B305-report-template-kit/
‚îú‚îÄ‚îÄ B305-report-template.qmd    # üìù Plantilla principal
‚îú‚îÄ‚îÄ reference.docx              # üìÑ Formato Word de referencia  
‚îú‚îÄ‚îÄ references.bib              # üìö Base de datos bibliogr√°fica
‚îú‚îÄ‚îÄ apa.csl                     # üìã Estilo de citaci√≥n APA
‚îú‚îÄ‚îÄ styles.css                  # üé® Estilos HTML
‚îî‚îÄ‚îÄ how-to-knit.md             # üìñ Instrucciones
```

::: {.fragment}
**¬°Todos deben estar en la misma carpeta!** üìÇ
:::

---

## Configuraci√≥n YAML

El encabezado YAML configura todo el documento:

```yaml
---
title: "T√çTULO DEL REPORTE (12‚Äì15 palabras)"
author:
  - name: "Nombre Apellido-Apellido" 
    affiliation: "Escuela de Biolog√≠a, Universidad de Costa Rica..."
keywords: ["palabra clave 1", "palabra clave 2", ...]
format:
  pdf: 
    pdf-engine: xelatex
    mainfont: "Times New Roman"
    fontsize: 12pt
    linestretch: 2    # Doble espacio
  html:
    css: styles.css
  docx:
    reference-doc: reference.docx
bibliography: references.bib
csl: apa.csl
lang: es
---
```

---

## M√∫ltiples formatos de salida

::: {.fragment}
### PDF (recomendado para entrega)
```bash
quarto render B305-report-template.qmd --to pdf
```
- Formato profesional
- Times New Roman, 12pt
- Doble espacio
- M√°rgenes correctos
:::

::: {.fragment}
### HTML (para revisi√≥n)
```bash
quarto render B305-report-template.qmd --to html
```
- R√°pido de generar
- F√°cil de compartir
- Links clickeables
:::

::: {.fragment}
### Word (si es necesario)
```bash
quarto render B305-report-template.qmd --to docx
```
- Compatible con revisiones
- Formato basado en `reference.docx`
:::

---

## Estructura del reporte

```markdown
# Resumen
**Resumen:** (m√°x. 250 palabras).
**Palabras claves:** palabra1; palabra2; palabra3; palabra4; palabra5

# INTRODUCCI√ìN
Contexto, antecedentes, hip√≥tesis...

# MATERIALES Y M√âTODOS
Descripci√≥n detallada de m√©todos...

# RESULTADOS  
Presentaci√≥n objetiva de resultados...

# DISCUSI√ìN
Interpretaci√≥n y comparaci√≥n con literatura...

# LITERATURA CITADA
(Se genera autom√°ticamente)
```

# Trabajando con citas

## Base de datos bibliogr√°fica (BibTeX)

El archivo `references.bib` contiene todas sus referencias:

```bibtex
@book{begon2006ecology,
  title={Ecology: from individuals to ecosystems},
  author={Begon, Michael and Townsend, Colin R and Harper, John L},
  year={2006},
  publisher={Blackwell publishing}
}

@article{verhulst1838notice,
  title={Notice sur la loi que la population suit dans son accroissement},
  author={Verhulst, Pierre Fran{\c{c}}ois},
  journal={Correspondance math{\'e}matique et physique},
  volume={10},
  pages={113--126},
  year={1838}
}
```

---

## Agregando nuevas referencias

::: {.fragment}
### Desde Google Scholar
1. Buscar el art√≠culo
2. Click en "Citar" 
3. Click en "BibTeX"
4. Copiar y pegar en `references.bib`
:::

::: {.fragment}
### Desde DOI
- Usar [doi2bib.org](https://www.doi2bib.org/)
- Introducir DOI: `10.1038/nature12373`
- Copiar resultado a `references.bib`
:::

---

## Citando en el texto

::: {.columns}

::: {.column width="50%"}
**C√≥digo Markdown:**
```markdown
<!-- Cita parent√©tica -->
El crecimiento poblacional [@verhulst1838notice] 
es fundamental.

<!-- Cita narrativa -->
Seg√∫n @begon2006ecology, las poblaciones...

<!-- M√∫ltiples citas -->
Varios autores [@verhulst1838notice; @gotelli2008primer] 
han estudiado...

<!-- Solo a√±o -->
@begon2006ecology [-@begon2006ecology] mostraron...

<!-- P√°ginas espec√≠ficas -->
Como indica @verhulst1838notice [p. 15], la ecuaci√≥n...
```
:::

::: {.column width="50%"}
**Resultado:**

El crecimiento poblacional (Verhulst, 1838) es fundamental.

Seg√∫n Begon et al. (2006), las poblaciones...

Varios autores (Verhulst, 1838; Gotelli, 2008) han estudiado...

Begon et al. (2006) mostraron...

Como indica Verhulst (1838, p. 15), la ecuaci√≥n...
:::

:::

# Figuras y tablas

## Figuras desde R

::: {.columns}

::: {.column width="50%"}
**C√≥digo R para figura:**
```markdown
#| label: fig-logistico
#| fig-cap: "Crecimiento log√≠stico de S. cerevisiae"
#| fig-width: 6
#| fig-height: 4
#| echo: false

library(ggplot2)
t <- seq(0, 24, 0.1)
N <- 1000 / (1 + 99 * exp(-0.3 * t))
data <- data.frame(tiempo = t, densidad = N)

ggplot(data, aes(tiempo, densidad)) +
  geom_line(color = "steelblue", size = 1.2) +
  labs(x = "Tiempo (horas)", 
       y = "Densidad (c√©lulas/mL)") +
  theme_bw()

Como se observa en @fig-logistico...

```

**Opciones importantes:**  
- `label:` para referencias cruzadas  
- `fig-cap:` para la leyenda  
- `echo: false` para ocultar c√≥digo  
- `fig-width` y `fig-height` para dimensiones  


:::

::: {.column width="50%"}
**Resultado ejecutado:**

```{r}
#| label: fig-logistico
#| fig-cap: "Crecimiento log√≠stico de *Saccharomyces cerevisiae*"
#| fig-width: 5
#| fig-height: 3.5
#| echo: false

library(ggplot2)
t <- seq(0, 24, 0.1)
N <- 1000 / (1 + 99 * exp(-0.3 * t))
data <- data.frame(tiempo = t, densidad = N)

ggplot(data, aes(tiempo, densidad)) +
  geom_line(color = "steelblue", size = 1.2) +
  labs(x = "Tiempo (horas)", 
       y = "Densidad (c√©lulas/mL)") +
  theme_bw()
```

Como se observa en @fig-logistico, el crecimiento presenta una curva t√≠pica log√≠stica.
:::

:::


---

## Tablas con c√≥digo R

::: {.columns}

::: {.column width="50%"}
**C√≥digo R para tabla:**
```markdown
#| label: tbl-parametros
#| tbl-cap: "Par√°metros del modelo log√≠stico"

library(knitr)
parametros <- data.frame(
  Par√°metro = c("K", "r", "N‚ÇÄ"),
  Valor = c(987.3, 0.281, 10.2),
  `Error est√°ndar` = c(45.2, 0.025, 1.8),
  Unidades = c("c√©lulas/mL", "h‚Åª¬π", "c√©lulas/mL")
)
kable(parametros, digits = 3)

Los par√°metros estimados (@tbl-parametros)...

```

:::

::: {.column width="50%"}
**Resultado ejecutado:**

```{r}
#| label: tbl-parametros
#| tbl-cap: "Par√°metros del modelo log√≠stico estimados"
#| echo: false

library(knitr)
parametros <- data.frame(
  Par√°metro = c("K", "r", "N‚ÇÄ"),
  Valor = c(987.3, 0.281, 10.2),
  `Error est√°ndar` = c(45.2, 0.025, 1.8),
  Unidades = c("c√©lulas/mL", "h‚Åª¬π", "c√©lulas/mL")
)
kable(parametros, digits = 3)
```

Los par√°metros estimados (@tbl-parametros) muestran que la capacidad de carga es aproximadamente 987 c√©lulas/mL.
:::

:::

---

## Figuras externas

:::{.fragment}
````{.markdown}
![Microscopio utilizado en el experimento](img/microscopio.jpeg){#fig-microscopio width=20%}

Las observaciones se realizaron con el microscopio mostrado en @fig-microscopio...
````
:::

::: {.fragment}
![Microscopio utilizado en el experimento](img/microscopio.jpeg){#fig-microscopio width=20%}

Las observaciones se realizaron con el microscopio mostrado en @fig-microscopio...
:::

::: {.fragment}
**Formatos recomendados:**  
- **PNG** para diagramas y screenshots  
- **JPG** para fotograf√≠as  
- **PDF** para figuras vectoriales  
- **SVG** para gr√°ficos web  
:::

# Flujo de trabajo recomendado

## Pasos para crear un reporte

### 1. Preparar el workspace

::: {.columns}
::: {.column width="50%"}
::: {.fragment}
1. **Crear nueva carpeta:**  
   - Nombrar: `mi-reporte-ecologia`   

2. **Descargar plantilla:**   
   - Ir al repositorio del curso  
   - Descargar `B305-report-template-kit.zip`  
   - Extraer en la carpeta creada  

3. **En RStudio:**  
   - File ‚Üí New Project ‚Üí Existing Directory  
   - Seleccionar `mi-reporte-ecologia`  
   - Renombrar `B305-report-template.qmd` ‚Üí `mi-reporte.qmd` 

:::
:::

::: {.column width="50%"}

::: {.fragment}
**Verificar archivos:**  
- ‚úÖ `mi-reporte.qmd`  
- ‚úÖ `references.bib`  
- ‚úÖ `reference.docx`  
- ‚úÖ `apa.csl`  
- ‚úÖ `styles.css`  
:::

::: {.fragment}
### 2. Configurar encabezado  
- Cambiar t√≠tulo y autor  
- Ajustar palabras clave  
- Verificar archivos auxiliares  
:::

::: {.fragment}
### 3. Escribir contenido  
- Usar estructura cient√≠fica est√°ndar  
- Incorporar c√≥digo R inline  
- Citar literatura relevante  
:::
:::
:::


---

## Durante el desarrollo

::: {.fragment}
### Renderizar frecuentemente
```bash
# Vista r√°pida HTML
quarto render mi-reporte.qmd --to html

# Versi√≥n final PDF  
quarto render mi-reporte.qmd --to pdf
```
:::

<!-- ::: {.fragment}
### Usar control de versiones
```bash
git init
git add .
git commit -m "Versi√≥n inicial del reporte"

# Despu√©s de cambios importantes
git add -A
git commit -m "Agregado an√°lisis estad√≠stico"
```
::: -->

::: {.fragment}
### Respaldos regulares
- Guardar en la nube (Google Drive, Dropbox)
- Enviar por email a ustedes mismos
- Usar repositorio GitHub
:::

---

## Consejos para reportes exitosos

::: {.fragment}
### Organizaci√≥n de archivos
```
mi-proyecto/
‚îú‚îÄ‚îÄ mi-reporte.qmd           # Documento principal
‚îú‚îÄ‚îÄ references.bib           # Bibliografia  
‚îú‚îÄ‚îÄ data/                    # Datos
‚îÇ   ‚îú‚îÄ‚îÄ crecimiento.csv
‚îÇ   ‚îî‚îÄ‚îÄ experimento.xlsx
‚îú‚îÄ‚îÄ scripts/                 # C√≥digo R auxiliar
‚îÇ   ‚îî‚îÄ‚îÄ analisis.R
‚îú‚îÄ‚îÄ figures/                 # Figuras externas
‚îÇ   ‚îî‚îÄ‚îÄ setup-experimental.jpg
‚îî‚îÄ‚îÄ output/                  # Archivos generados
    ‚îú‚îÄ‚îÄ mi-reporte.pdf
    ‚îî‚îÄ‚îÄ mi-reporte.html
```
:::

::: {.fragment}
### Buenas pr√°cticas
- **Comentar el c√≥digo R** para futuro yo
- **Usar nombres descriptivos** para chunks y figuras  
- **Verificar referencias** antes de entregar
- **Revisar formato final** en PDF
:::

# Demostraci√≥n pr√°ctica

## Crear un reporte simple

Vamos a crear juntos un reporte b√°sico paso a paso:

::: {.fragment}
### 1. Configuraci√≥n inicial
- Copiar plantilla
- Cambiar t√≠tulo y autor  
- Ajustar palabras clave
:::

::: {.fragment}
### 2. Agregar contenido
- Escribir introducci√≥n simple
- Incluir una figura R
- Agregar una cita
:::

::: {.fragment}
### 3. Renderizar
- Generar HTML para revisi√≥n
- Generar PDF final
:::

---

# ¬°Manos a la obra! üöÄ

**Su pr√≥ximo reporte ser√°:**  
- Profesional y reproducible  
- Con citas autom√°ticas   
- Figuras y tablas numeradas  
- M√∫ltiples formatos de salida  

**¬øPreguntas?** ü§î

---

## Para la pr√≥xima semana

::: {.fragment}
### Pr√°ctica requerida
1. **Descargar la plantilla** desde el repositorio del curso
2. **Crear un reporte corto** (2-3 p√°ginas) sobre cualquier tema de ecolog√≠a
3. **Incluir:** Al menos 2 citas, 1 figura generada con R, 1 tabla
4. **Renderizar** a PDF y HTML
:::

## Bibliografia

### Documentaci√≥n oficial
- [Quarto Documentation](https://quarto.org/docs/)
- [Quarto Reference](https://quarto.org/docs/reference/)

### Markdown y matem√°ticas
- [Markdown Cheat Sheet](https://www.markdownguide.org/cheat-sheet/)
- [LaTeX Math Symbols](http://tug.ctan.org/info/undergradmath/undergradmath.pdf)

### Gesti√≥n bibliogr√°fica
- [Zotero](https://www.zotero.org/) - Gestor gratuito
- [Google Scholar](https://scholar.google.com/) - B√∫squeda acad√©mica
- [doi2bib](https://www.doi2bib.org/) - DOI a BibTeX
